import{S as ie,i as ce,s as ue,k as _,r as K,a as O,l as m,m as b,u as X,h as u,c as z,p as E,b as Y,H as o,J as x,K as q,n as le,L as we,M as ge,N as Ie,v as Ee,x as $,O as re,z as de,A as fe,q as S,B as he,P as ae,g as _e,d as me,C as pe,o as Te}from"../chunks/index.b539c111.js";function oe(n,e){return console.log(n,e),console.log(JSON.stringify(e)),fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(async t=>{if(t.status<200||t.status>=400)throw new Error(await t.text());return t.json()})}function ke(){return oe("/api/addItem",{name:"New Document",tags:[]})}function Ne(n){return oe("/api/deleteItem",{uid:n})}function Se(n){return fetch(`/api/uid/${n}`).then(e=>e.text())}function Ve(n){return fetch(`/api/render/${n}`).then(e=>e.text())}function Be(n){return oe("/api/getByName",{name:n})}function Ue(n){return oe("/api/getByTags",{tags:n})}function Oe(n){return oe("/api/updateMeta",n)}function ve(n,e,t){const s=n.slice();return s[16]=e[t],s}function be(n,e,t){const s=n.slice();return s[19]=e[t],s}function ye(n){let e,t=n[19]+"",s;return{c(){e=_("p"),s=K(t),this.h()},l(l){e=m(l,"P",{class:!0});var r=b(e);s=X(r,t),r.forEach(u),this.h()},h(){E(e,"class","svelte-zdnmo6")},m(l,r){Y(l,e,r),o(e,s)},p(l,r){r&16&&t!==(t=l[19]+"")&&Ee(s,t)},d(l){l&&u(e)}}}function De(n){let e,t,s=n[16].name+"",l,r,g,v,w,I,p=n[16].tags,h=[];for(let y=0;y<p.length;y+=1)h[y]=ye(be(n,p,y));return{c(){e=_("li"),t=_("button"),l=K(s),r=O(),g=_("div");for(let y=0;y<h.length;y+=1)h[y].c();v=O(),this.h()},l(y){e=m(y,"LI",{class:!0});var T=b(e);t=m(T,"BUTTON",{class:!0});var f=b(t);l=X(f,s),f.forEach(u),r=z(T),g=m(T,"DIV",{class:!0});var i=b(g);for(let M=0;M<h.length;M+=1)h[M].l(i);i.forEach(u),v=z(T),T.forEach(u),this.h()},h(){E(t,"class","file-link-button has-background-white svelte-zdnmo6"),E(g,"class","svelte-zdnmo6"),E(e,"class","search-entry svelte-zdnmo6")},m(y,T){Y(y,e,T),o(e,t),o(t,l),o(e,r),o(e,g);for(let f=0;f<h.length;f+=1)h[f].m(g,null);o(e,v),w||(I=q(t,"click",function(){Ie(n[7](n[16]))&&n[7](n[16]).apply(this,arguments)}),w=!0)},p(y,T){if(n=y,T&16&&s!==(s=n[16].name+"")&&Ee(l,s),T&16){p=n[16].tags;let f;for(f=0;f<p.length;f+=1){const i=be(n,p,f);h[f]?h[f].p(i,T):(h[f]=ye(i),h[f].c(),h[f].m(g,null))}for(;f<h.length;f+=1)h[f].d(1);h.length=p.length}},d(y){y&&u(e),we(h,y),w=!1,I()}}}function ze(n){let e,t,s,l,r,g,v,w,I,p,h,y,T,f,i,M,L,B,a,k,C,J,F,A,H,Z,P=n[4],V=[];for(let N=0;N<P.length;N+=1)V[N]=De(ve(n,P,N));return{c(){e=_("div"),t=_("div"),s=_("div"),l=_("form"),r=_("label"),g=K("Search by Name"),v=O(),w=_("div"),I=_("input"),p=O(),h=_("button"),y=K("Search"),T=O(),f=_("form"),i=_("label"),M=K("Search by Tags"),L=O(),B=_("div"),a=_("input"),k=O(),C=_("button"),J=K("Submit Tags"),F=O(),A=_("ul");for(let N=0;N<V.length;N+=1)V[N].c();this.h()},l(N){e=m(N,"DIV",{id:!0,tabindex:!0,class:!0});var c=b(e);t=m(c,"DIV",{});var d=b(t);s=m(d,"DIV",{id:!0,class:!0});var D=b(s);l=m(D,"FORM",{class:!0});var U=b(l);r=m(U,"LABEL",{});var j=b(r);g=X(j,"Search by Name"),j.forEach(u),v=z(U),w=m(U,"DIV",{class:!0});var R=b(w);I=m(R,"INPUT",{class:!0}),p=z(R),h=m(R,"BUTTON",{class:!0});var W=b(h);y=X(W,"Search"),W.forEach(u),R.forEach(u),U.forEach(u),T=z(D),f=m(D,"FORM",{class:!0});var G=b(f);i=m(G,"LABEL",{});var te=b(i);M=X(te,"Search by Tags"),te.forEach(u),L=z(G),B=m(G,"DIV",{class:!0});var Q=b(B);a=m(Q,"INPUT",{class:!0}),k=z(Q),C=m(Q,"BUTTON",{class:!0});var ne=b(C);J=X(ne,"Submit Tags"),ne.forEach(u),Q.forEach(u),G.forEach(u),F=z(D),A=m(D,"UL",{});var se=b(A);for(let ee=0;ee<V.length;ee+=1)V[ee].l(se);se.forEach(u),D.forEach(u),d.forEach(u),c.forEach(u),this.h()},h(){E(I,"class","input"),E(h,"class","button has-background-primary has-text-light"),E(w,"class","svelte-zdnmo6"),E(l,"class","svelte-zdnmo6"),E(a,"class","input"),E(C,"class","button has-background-primary has-text-light"),E(B,"class","svelte-zdnmo6"),E(f,"class","svelte-zdnmo6"),E(s,"id","file-search"),E(s,"class","has-background-white svelte-zdnmo6"),E(e,"id","centerer"),E(e,"tabindex","0"),E(e,"class","svelte-zdnmo6")},m(N,c){Y(N,e,c),o(e,t),o(t,s),o(s,l),o(l,r),o(r,g),o(l,v),o(l,w),o(w,I),n[12](I),x(I,n[0]),o(w,p),o(w,h),o(h,y),o(s,T),o(s,f),o(f,i),o(i,M),o(f,L),o(f,B),o(B,a),x(a,n[1]),o(B,k),o(B,C),o(C,J),o(s,F),o(s,A);for(let d=0;d<V.length;d+=1)V[d].m(A,null);n[15](e),H||(Z=[q(I,"input",n[13]),q(l,"submit",n[5]),q(a,"input",n[14]),q(f,"submit",n[6]),q(e,"keydown",n[8])],H=!0)},p(N,[c]){if(c&1&&I.value!==N[0]&&x(I,N[0]),c&2&&a.value!==N[1]&&x(a,N[1]),c&144){P=N[4];let d;for(d=0;d<P.length;d+=1){const D=ve(N,P,d);V[d]?V[d].p(D,c):(V[d]=De(D),V[d].c(),V[d].m(A,null))}for(;d<V.length;d+=1)V[d].d(1);V.length=P.length}},i:le,o:le,d(N){N&&u(e),n[12](null),we(V,N),n[15](null),H=!1,ge(Z)}}}function Me(n,e,t){let s,l,r,g,v=[],{selectedUID:w=""}=e,{selectedDoc:I=void 0}=e;async function p(a){console.log(a);const k=await Be(s);t(4,v=[]),t(4,v=k)}async function h(a){a.preventDefault();const k=l.split(/[ ,\n]+/),C=await Ue(k);t(4,v=[]),t(4,v=C)}function y(a){console.log(a),t(9,w=a.uid),t(10,I=a)}function T(a){console.log(a),a.code=="Escape"&&(t(2,r.style.display="none",r),t(4,v=[]))}function f(){t(2,r.style.display="flex",r),g.focus()}function i(a){$[a?"unshift":"push"](()=>{g=a,t(3,g)})}function M(){s=this.value,t(0,s)}function L(){l=this.value,t(1,l)}function B(a){$[a?"unshift":"push"](()=>{r=a,t(2,r)})}return n.$$set=a=>{"selectedUID"in a&&t(9,w=a.selectedUID),"selectedDoc"in a&&t(10,I=a.selectedDoc)},[s,l,r,g,v,p,h,y,T,w,I,f,i,M,L,B]}class Le extends ie{constructor(e){super(),ce(this,e,Me,ze,ue,{selectedUID:9,selectedDoc:10,show:11})}get show(){return this.$$.ctx[11]}}function Ce(n){let e;return{c(){e=_("div"),this.h()},l(t){e=m(t,"DIV",{id:!0,class:!0});var s=b(e);s.forEach(u),this.h()},h(){E(e,"id","display-content"),E(e,"class","content svelte-h2p3mw")},m(t,s){Y(t,e,s),n[2](e)},p:le,i:le,o:le,d(t){t&&u(e),n[2](null)}}}function He(n,e,t){let{content:s=""}=e,l;async function r(){console.log(s),t(0,l.innerHTML=s,l),await MathJax.typesetPromise(),t(0,l.scrollTop=l.scrollHeight,l)}function g(v){$[v?"unshift":"push"](()=>{l=v,t(0,l)})}return n.$$set=v=>{"content"in v&&t(1,s=v.content)},n.$$.update=()=>{n.$$.dirty&2&&s&&r()},[l,s,g]}class Pe extends ie{constructor(e){super(),ce(this,e,He,Ce,ue,{content:1})}}function Fe(n){let e,t,s,l,r,g,v,w,I,p,h,y,T,f,i,M,L,B,a,k,C,J,F,A,H,Z,P,V,N;function c(D){n[9](D)}let d={};return n[2]!==void 0&&(d.content=n[2]),H=new Pe({props:d}),$.push(()=>re(H,"content",c)),{c(){e=_("div"),t=_("div"),s=_("div"),l=_("form"),r=_("div"),g=_("label"),v=K("Name"),w=O(),I=_("input"),p=O(),h=_("div"),y=_("label"),T=K("Tags"),f=O(),i=_("input"),M=O(),L=_("button"),B=O(),a=_("div"),k=_("button"),C=K("X"),J=O(),F=_("div"),A=O(),de(H.$$.fragment),this.h()},l(D){e=m(D,"DIV",{id:!0,class:!0});var U=b(e);t=m(U,"DIV",{style:!0,class:!0});var j=b(t);s=m(j,"DIV",{style:!0});var R=b(s);l=m(R,"FORM",{style:!0,class:!0});var W=b(l);r=m(W,"DIV",{class:!0});var G=b(r);g=m(G,"LABEL",{});var te=b(g);v=X(te,"Name"),te.forEach(u),w=z(G),I=m(G,"INPUT",{}),G.forEach(u),p=z(W),h=m(W,"DIV",{style:!0,class:!0});var Q=b(h);y=m(Q,"LABEL",{});var ne=b(y);T=X(ne,"Tags"),ne.forEach(u),f=z(Q),i=m(Q,"INPUT",{style:!0}),Q.forEach(u),M=z(W),L=m(W,"BUTTON",{style:!0}),b(L).forEach(u),W.forEach(u),B=z(R),a=m(R,"DIV",{style:!0});var se=b(a);k=m(se,"BUTTON",{class:!0,style:!0});var ee=b(k);C=X(ee,"X"),ee.forEach(u),se.forEach(u),R.forEach(u),J=z(j),F=m(j,"DIV",{id:!0,class:!0}),b(F).forEach(u),j.forEach(u),A=z(U),fe(H.$$.fragment,U),U.forEach(u),this.h()},h(){E(r,"class","svelte-18fvyn0"),S(i,"width","100%"),S(h,"flex-grow","1"),E(h,"class","svelte-18fvyn0"),S(L,"display","none"),S(l,"width","auto"),S(l,"flex-grow","1"),E(l,"class","svelte-18fvyn0"),E(k,"class","button has-background-danger has-text-light"),S(k,"font-weight","bold"),S(a,"display","flex"),S(a,"align-items","center"),S(a,"margin","0em 0.25rem"),S(s,"display","flex"),E(F,"id","editor"),E(F,"class","svelte-18fvyn0"),S(t,"border","solid black 1px"),E(t,"class","svelte-18fvyn0"),E(e,"id","editor-content"),E(e,"class","svelte-18fvyn0")},m(D,U){Y(D,e,U),o(e,t),o(t,s),o(s,l),o(l,r),o(r,g),o(g,v),o(r,w),o(r,I),x(I,n[0]),o(l,p),o(l,h),o(h,y),o(y,T),o(h,f),o(h,i),x(i,n[1]),o(l,M),o(l,L),o(s,B),o(s,a),o(a,k),o(k,C),o(t,J),o(t,F),o(e,A),he(H,e,null),P=!0,V||(N=[q(I,"input",n[7]),q(i,"input",n[8]),q(l,"submit",n[3]),q(k,"click",n[4])],V=!0)},p(D,[U]){U&1&&I.value!==D[0]&&x(I,D[0]),U&2&&i.value!==D[1]&&x(i,D[1]);const j={};!Z&&U&4&&(Z=!0,j.content=D[2],ae(()=>Z=!1)),H.$set(j)},i(D){P||(_e(H.$$.fragment,D),P=!0)},o(D){me(H.$$.fragment,D),P=!1},d(D){D&&u(e),pe(H),V=!1,ge(N)}}}function Ae(n,e,t){let s,{curDoc:l=void 0}=e,r="",g="",v="",w;function I(){l?(r=l.uid,t(0,g=l.name),t(1,v=l.tags.join(" "))):(t(0,g=""),t(1,v=""),s&&s.setValue(""))}Te(async()=>{t(6,s=ace.edit("editor")),s.setTheme("ace/theme/twilight"),s.session.setMode("ace/mode/markdown"),s.session.setUseWrapMode(!0),s.setKeyboardHandler("ace/keyboard/vim"),s.setFontSize(14),document.getElementById("editor").style.fontSize="18px",s.commands.addCommand({name:"saveFile",bindKey:{win:"Ctrl-S",mac:"Command-S",sender:"editor|cli"},exec(i,M,L){const B=s.getValue();fetch("/api/writeItem",{method:"POST",headers:{"Content-Type":"application/json","saladnotes-uid":r},body:B}).then(k=>{}),console.log("saving...",i,M,L),console.log("Content:",s.getValue()),Ve(r).then(k=>{t(2,w=k)})}})});function p(i){i.preventDefault(),Oe({uid:r,name:g,tags:v.split(/[ ,\n]+/)})}function h(i){console.log("Delete Handler"),confirm("Are you sure you want to delete this document?")&&(Ne(r),t(5,l=void 0))}function y(){g=this.value,t(0,g)}function T(){v=this.value,t(1,v)}function f(i){w=i,t(2,w)}return n.$$set=i=>{"curDoc"in i&&t(5,l=i.curDoc)},n.$$.update=()=>{n.$$.dirty&96&&(l&&Se(l.uid).then(i=>{s.resize(),s.setValue(i),s.clearSelection()}),I())},[g,v,w,p,h,l,s,y,T,f]}class je extends ie{constructor(e){super(),ce(this,e,Ae,Fe,ue,{curDoc:5})}}function Je(n){let e,t,s,l,r,g,v,w,I,p,h,y,T,f,i,M,L,B,a,k,C,J,F,A;function H(c){n[4](c)}function Z(c){n[5](c)}let P={};n[1]!==void 0&&(P.show=n[1]),n[0]!==void 0&&(P.selectedDoc=n[0]),i=new Le({props:P}),$.push(()=>re(i,"show",H)),$.push(()=>re(i,"selectedDoc",Z));function V(c){n[6](c)}let N={};return n[0]!==void 0&&(N.curDoc=n[0]),k=new je({props:N}),$.push(()=>re(k,"curDoc",V)),{c(){e=_("div"),t=_("button"),s=K("+"),l=O(),r=_("button"),g=K("Search"),v=O(),w=_("div"),I=O(),p=_("div"),h=K("SaladNotes"),y=O(),T=_("div"),f=O(),de(i.$$.fragment),B=O(),a=_("div"),de(k.$$.fragment),this.h()},l(c){e=m(c,"DIV",{class:!0,style:!0});var d=b(e);t=m(d,"BUTTON",{class:!0,style:!0});var D=b(t);s=X(D,"+"),D.forEach(u),l=z(d),r=m(d,"BUTTON",{class:!0,style:!0});var U=b(r);g=X(U,"Search"),U.forEach(u),v=z(d),w=m(d,"DIV",{style:!0}),b(w).forEach(u),I=z(d),p=m(d,"DIV",{class:!0,style:!0});var j=b(p);h=X(j,"SaladNotes"),j.forEach(u),y=z(d),T=m(d,"DIV",{style:!0}),b(T).forEach(u),d.forEach(u),f=z(c),fe(i.$$.fragment,c),B=z(c),a=m(c,"DIV",{});var R=b(a);fe(k.$$.fragment,R),R.forEach(u),this.h()},h(){E(t,"class","button has-background-primary has-text-light"),S(t,"margin-left","0.25rem"),S(t,"margin-right","0.25rem"),S(t,"font-weight","bold"),E(r,"class","button has-background-primary has-text-light"),E(r,"style",""),S(w,"flex-grow","1"),E(p,"class","has-text-primary-light"),S(p,"display","flex"),S(p,"align-items","center"),S(p,"font-size","1.5rem"),S(p,"font-weight","bold"),S(p,"text-align","center"),S(T,"flex-grow","1"),E(e,"class","has-background-dark"),S(e,"display","flex"),S(e,"justify-content","center"),S(e,"align-items","center")},m(c,d){Y(c,e,d),o(e,t),o(t,s),o(e,l),o(e,r),o(r,g),o(e,v),o(e,w),o(e,I),o(e,p),o(p,h),o(e,y),o(e,T),Y(c,f,d),he(i,c,d),Y(c,B,d),Y(c,a,d),he(k,a,null),J=!0,F||(A=[q(t,"click",n[3]),q(r,"click",n[2])],F=!0)},p(c,[d]){const D={};!M&&d&2&&(M=!0,D.show=c[1],ae(()=>M=!1)),!L&&d&1&&(L=!0,D.selectedDoc=c[0],ae(()=>L=!1)),i.$set(D);const U={};!C&&d&1&&(C=!0,U.curDoc=c[0],ae(()=>C=!1)),k.$set(U)},i(c){J||(_e(i.$$.fragment,c),_e(k.$$.fragment,c),J=!0)},o(c){me(i.$$.fragment,c),me(k.$$.fragment,c),J=!1},d(c){c&&u(e),c&&u(f),pe(i,c),c&&u(B),c&&u(a),pe(k),F=!1,ge(A)}}}function Re(n,e,t){let s,l;function r(){l()}function g(){ke().then(p=>{t(0,s=p)})}function v(p){l=p,t(1,l)}function w(p){s=p,t(0,s)}function I(p){s=p,t(0,s)}return n.$$.update=()=>{n.$$.dirty&1},[s,l,r,g,v,w,I]}class Ke extends ie{constructor(e){super(),ce(this,e,Re,Je,ue,{})}}export{Ke as default};
